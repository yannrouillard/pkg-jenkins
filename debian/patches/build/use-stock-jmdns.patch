Description: Jenkins upstream ships with a forked version of
 JmDNS which has a patched in abort method with shuts down
 uncleanly without blocking.
 .
 Unit this feature ships in JmDNS upstream we will live with a
 blocking shutdown in Debian and Ubuntu.
Author: James Page <james.page@ubuntu.com>
Forwarded: not-needed

--- a/core/src/main/java/hudson/DNSMultiCast.java
+++ b/core/src/main/java/hudson/DNSMultiCast.java
@@ -67,12 +67,12 @@ public class DNSMultiCast implements Clo
 
     public void close() {
         if (jmdns!=null) {
-//            try {
-                jmdns.abort();
+            try {
+                jmdns.close();
                 jmdns = null;
-//            } catch (final IOException e) {
-//                LOGGER.log(Level.WARNING,"Failed to close down JmDNS instance!",e);
-//            }
+            } catch (final IOException e) {
+                LOGGER.log(Level.WARNING,"Failed to close down JmDNS instance!",e);
+            }
         }
     }
 
